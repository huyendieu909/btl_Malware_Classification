import numpy, os, array
from PIL import Image

filename = "J:\Malware_Classification\PracticalMalwareAnalysis-Labs\PracticalMalwareAnalysis-Labs.exe"
f = open(filename,'rb')
ln = os.path.getsize(filename) # Độ dài của file trong byte
width = 256
rem = ln % width

a = array.array("B") # Mảng uint8
a.fromfile(f, ln - rem)
f.close()

# Chuyển độ dài của mảng mới thành số nguyên
new_length = int(len(a) / width)

# Sử dụng số nguyên mới để reshape mảng
g = numpy.reshape(a, (new_length, width))
g = numpy.uint8(g)

# Tạo đối tượng ảnh từ mảng numpy
img = Image.fromarray(g)

# Lưu ảnh bằng PIL
img.save("J:\Malware_Classification\PracticalMalwareAnalysis-Labs\PracticalMalwareAnalysis-Labs.png")

